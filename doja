local ReplicatedStorage = game:GetService("ReplicatedStorage")
local player = game.Players.LocalPlayer

-- ===== ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ä‡πà‡∏ß‡∏¢ =====
-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏£‡∏≠‡∏à‡∏ô Seeds >= target
local function waitUntilSeeds(target)
    local gui = player:WaitForChild("PlayerGui"):WaitForChild("GameGui")
    local seedText = gui.Screen.Bottom.CurrencyDisplay.SeedsDisplay.Title

    local function parse(str)
        local cleaned = str:gsub("[^%d]", "")
        return tonumber(cleaned) or 0
    end

    repeat
        task.wait(0.3)
        print("Seed ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ:", parse(seedText.Text))
    until parse(seedText.Text) >= target
end

-- ===== ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏Å‡∏° =====
local function playagain()
    local ok, err = pcall(function()
        ReplicatedStorage:WaitForChild("RemoteFunctions"):WaitForChild("RestartGame"):InvokeServer()
    end)
    if not ok then
        warn("‚ùå RestartGame failed:", err)
    else
        print("‚úÖ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡πâ‡∏ß")
    end
end

local function selectmode()
    local args = {"dif_apocalypse"}
    local ok, err = pcall(function()
        ReplicatedStorage:WaitForChild("RemoteFunctions"):WaitForChild("PlaceDifficultyVote"):InvokeServer(unpack(args))
    end)
    if not ok then warn("‚ùå PlaceDifficultyVote failed:", err) end
end

local function raff1()
    local args = {
        "unit_rafflesia",
        {
            Valid = true,
            PathIndex = 1,
            Position = vector.create(51.551246643066406, -21.75, -54.6295280456543),
            DistanceAlongPath = 5.913198724685674,
            CF = CFrame.new(51.551246643066406, -21.75, -54.6295280456543,
                0.7071068286895752, 0, -0.7071067690849304,
                0, 1, 0,
                0.7071068286895752, 0, 0.7071067690849304),
            Rotation = 180
        }
    }
    local ok, err = pcall(function()
        ReplicatedStorage:WaitForChild("RemoteFunctions"):WaitForChild("PlaceUnit"):InvokeServer(unpack(args))
    end)
    if not ok then warn("‚ùå PlaceUnit raff1 failed:", err) end
end

local function raff2()
    local args = {
        "unit_rafflesia",
        {
            Valid = true,
            PathIndex = 2,
            Position = vector.create(-54.302581787109375, -21.75, -53.1189079284668),
            DistanceAlongPath = 8.049594790874286,
            CF = CFrame.new(-54.302581787109375, -21.75, -53.1189079284668,
                0.7071068286895752, 0, 0.7071067690849304,
                0, 1, 0,
                -0.7071068286895752, 0, 0.7071067690849304),
            Rotation = 180
        }
    }
    local ok, err = pcall(function()
        ReplicatedStorage:WaitForChild("RemoteFunctions"):WaitForChild("PlaceUnit"):InvokeServer(unpack(args))
    end)
    if not ok then warn("‚ùå PlaceUnit raff2 failed:", err) end
end

-- raff3_debug: ‡∏ß‡∏≤‡∏á + ‡∏£‡∏≠ spawn + ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö UID + ‡∏£‡∏≠ Seeds ‚â• 8000 + ‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î ‡∏û‡∏£‡πâ‡∏≠‡∏° debug response
local function raff3_debug()
    print("üå± ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ß‡∏≤‡∏á rafflesia ‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà 3")

    local argsPlace = {
        "unit_rafflesia",
        {
            Valid = true,
            PathIndex = 1,
            Position = vector.create(51.909950256347656, -21.75, -54.98823165893555),
            DistanceAlongPath = 5.405915231144293,
            CF = CFrame.new(51.909950256347656, -21.75, -54.98823165893555,
                0.7071068286895752, 0, -0.7071067690849304,
                0, 1, 0,
                0.7071068286895752, 0, 0.7071067690849304),
            Rotation = 180
        }
    }

    local placeRemote = ReplicatedStorage:WaitForChild("RemoteFunctions"):WaitForChild("PlaceUnit")
    local ok, err = pcall(function()
        placeRemote:InvokeServer(unpack(argsPlace))
    end)
    if not ok then
        warn("‚ùå PlaceUnit raff3 failed:", err)
        return
    end
    print("‚úÖ ‡∏ß‡∏≤‡∏á‡∏¢‡∏π‡∏ô‡∏¥‡∏ï‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß")

    -- ‡∏£‡∏≠ spawn ‡∏Ç‡∏≠‡∏á‡∏¢‡∏π‡∏ô‡∏¥‡∏ï‡πÉ‡∏ô workspace
    local entities = workspace:WaitForChild("Map"):WaitForChild("Entities")
    local newUnit = nil
    print("‚è≥ ‡∏£‡∏≠ spawn rafflesia...")

    repeat
        for _, u in pairs(entities:GetChildren()) do
            if u.Name == "unit_rafflesia" and not u:GetAttribute("Checked") then
                u:SetAttribute("Checked", true)
                newUnit = u
                break
            end
        end
        task.wait(0.2)
    until newUnit

    print("‚úÖ ‡∏¢‡∏π‡∏ô‡∏¥‡∏ï spawn ‡πÅ‡∏•‡πâ‡∏ß")

    -- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Attributes ‡∏Ç‡∏≠‡∏á‡∏¢‡∏π‡∏ô‡∏¥‡∏ï
    local attrs = newUnit:GetAttributes()
    print("Attributes ‡∏Ç‡∏≠‡∏á‡∏¢‡∏π‡∏ô‡∏¥‡∏ï:", attrs)

    -- ‡∏´‡∏≤ UID
    local unitId = newUnit:GetAttribute("ID") or newUnit:GetAttribute("UnitId")
    if not unitId then
        warn("‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö UID ‡∏Ç‡∏≠‡∏á raff3 ‡πÉ‡∏ô Attributes")
        return
    end
    print("üî¢ UID ‡∏Ç‡∏≠‡∏á‡∏¢‡∏π‡∏ô‡∏¥‡∏ï:", unitId)

    -- ‡∏£‡∏≠ Seeds ‚â• 8000
    print("‚è≥ ‡∏£‡∏≠ Seeds ‚â• 8000 ‡∏Å‡πà‡∏≠‡∏ô‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î...")
    waitUntilSeeds(8000)
    task.wait(0.5) -- ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏¢‡∏π‡∏ô‡∏¥‡∏ï

    -- ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å UpgradeUnit ‡∏û‡∏£‡πâ‡∏≠‡∏° debug response
    local upgradeRemote = ReplicatedStorage:WaitForChild("RemoteFunctions"):WaitForChild("UpgradeUnit")
    local argsUpgrade = {unitId} -- UID ‡∏ï‡∏£‡∏á ‡πÜ (‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô table ‡∏ñ‡πâ‡∏≤ server ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£)
    
    print("üöÄ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á UpgradeUnit... args:", argsUpgrade[1])
    local ok2, response = pcall(function()
        return upgradeRemote:InvokeServer(unpack(argsUpgrade))
    end)

    if not ok2 then
        warn("‚ùå UpgradeUnit failed:", response)
    else
        print("‚úÖ UpgradeUnit response:", response)
    end
end

-- ===== ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î =====
playagain()
task.wait(6)
selectmode()
task.wait(6)
raff1()
task.wait(12)
raff2()
task.wait(54)
raff3_debug()
