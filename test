-- ===============================
-- Auto Select Rafflesia (Safe Version)
-- ===============================

local Players = game:GetService("Players")
local player = Players.LocalPlayer
local PlayerGui = player:WaitForChild("PlayerGui")

-- ‡∏£‡∏≠ GameGui ‡πÇ‡∏ú‡∏•‡πà‡∏à‡∏£‡∏¥‡∏á
local GameGui
repeat
    task.wait()
    GameGui = PlayerGui:FindFirstChild("GameGui", true)
until GameGui

-- ‡∏´‡∏≤ ScrollingFrame ‡∏Ç‡∏≠‡∏á Inventory ‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏û‡∏±‡∏á
local ScrollingFrame
for _, v in ipairs(GameGui:GetDescendants()) do
    if v:IsA("ScrollingFrame") and v.Name == "ScrollingFrame" then
        ScrollingFrame = v
        break
    end
end

if not ScrollingFrame then
    error("‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö ScrollingFrame (Inventory ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏¥‡∏î?)")
end

print("‚úÖ Found ScrollingFrame:", ScrollingFrame:GetFullName())

-- ===============================
-- ‡∏´‡∏≤ unit rafflesia ‡πÅ‡∏•‡∏∞‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏à‡∏£‡∏¥‡∏á
-- ===============================

local TARGET = "rafflesia"
local found = false

for _, item in ipairs(ScrollingFrame:GetChildren()) do
    if item:IsA("Frame") then
        -- ‡∏ï‡∏£‡∏ß‡∏à‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏≤‡∏Å TextLabel
        for _, obj in ipairs(item:GetDescendants()) do
            if obj:IsA("TextLabel") then
                if string.lower(obj.Text):find(TARGET) then
                    print("‚úÖ Found unit:", obj.Text)
                    found = true

                    -- ‡∏´‡∏≤ TextButton ‡πÉ‡∏ô frame ‡∏ô‡∏µ‡πâ
                    local button = item:FindFirstChildWhichIsA("TextButton", true)
                    if not button then
                        error("‚ùå ‡πÄ‡∏à‡∏≠ unit ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏õ‡∏∏‡πà‡∏°")
                    end

                    -- ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏ú‡πà‡∏≤‡∏ô logic ‡∏à‡∏£‡∏¥‡∏á
                    local connections = getconnections(button.Activated)
                    if #connections == 0 then
                        error("‚ùå ‡∏õ‡∏∏‡πà‡∏°‡πÑ‡∏°‡πà‡∏°‡∏µ connections")
                    end

                    for _, conn in ipairs(connections) do
                        if conn.Function then
                            conn.Function()
                        end
                    end

                    print("üéØ Equip rafflesia ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à")
                    return
                end
            end
        end
    end
end

if not found then
    warn("‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö rafflesia ‡πÉ‡∏ô Inventory")
end
